# TreeMap

## 二叉查找树

**特点：**

1. 若左子树不空，则左子树上所有的值均小于它的根节点的值。
2. 若右子树不空，则右子树上所有的值均大于它的根节点的值。
3. 左右子树均分别为二叉排序树。
4. 没有相等的节点。

**二叉查找树就是每个节点的值按照大小排列的二叉树**，**二叉查找树方便对节点的值进行查找。**

![](../../../photo/JavaSE/集合/TreeMap/二叉查找树结构.png)

## 二叉查找树的查找规则

1. 从根节点开始，如果要查找的值等于节点的值，则返回。
2. 如果要查找的值小于节点的值，那就在左子树中递归查找。
3. 如果要查找的值大于节点的值，那就在左子树中递归查找。

![](../../../photo/JavaSE/集合/TreeMap/二叉查找树的查找规则.png)

## 平衡二叉树

​		为了避免出现“瘸子”的现象，减少树的高度，提高我们的搜索效率，又存在一种树的结构“平衡二叉树”，它的左右两个子树高度差的绝对值不超过1，并且左右两个子树都是一颗平衡二叉树。

![](../../../photo/JavaSE/集合/TreeMap/平衡二叉树结构.png)

## 平衡二叉树的旋转

**旋转的性质**

1. **左旋**：就是将节点的**右支往左拉**，**右子节点变成父节点**，并把晋升之后多余的**左子节点**让给降级节点的**右子节点**。
2. **右旋**：就是将节点的**左支往右拉**，**左子节点变成父节点**，并把晋升之后多余的**右子节点**让给降级节点的**左子节点**。

**四种失衡的情况：**

**左左情况，需要以10为基准节点进行右旋**

![](../../../photo/JavaSE/集合/TreeMap/失衡情况-左左.png)

**左右情况，需要以7节点左旋，然后以11节点右旋**

![](../../../photo/JavaSE/集合/TreeMap/失衡情况-左右.png)

**右左情况，需要以15节点右旋，然后以11节点左旋**

![](../../../photo/JavaSE/集合/TreeMap/失衡情况-右左.png)

**右右情况，只需11节点左旋**

![](../../../photo/JavaSE/集合/TreeMap/失衡情况-右右.png)

**注意**：**在进行旋转维护失衡的过程中，需要根据是左旋还是右旋的情况，把多余的节点重新指定父节点。**

**例如左右情况，实际上左右情况还分为两种：**

1. 新增的节点（**图中红色的节点**）是父节点的左子节点。

   ![](../../../photo/JavaSE/集合/TreeMap/失衡情况-左右-特殊情况.png)

2. 新增的节点是父节点的右子节点，这种情况依照上述分析左右情况的例子即可。

**右左情况也是类似的，这里讲一下需要重新指定父节点的情况：**

新增的节点（**图中红色的节点**）是父节点的左子节点。

![](../../../photo/JavaSE/集合/TreeMap/失衡情况-右左.png)



## 红黑树

### 描述

1. 红黑树是一种自平衡的二叉查找树。
2. 红黑树的每一个节点都有存储位表示节点的颜色，可以是红或黑。
3. 红黑树不是高度平衡的，它的平衡是通过红黑树的特性进行实现的。

### 特性

1. 每一个节点或是红色，或是黑色。
2. 根节点必须是黑色。
3. 每个叶子节点是黑色的。（Nil这里叶子节点，是指为空）。
4. 如果一个节点是红色，则它的子节点必须是黑色。
5. 从一个节点到该节点的子孙节点的所有路径上包含相同数目的黑节点（这里指到叶子节点的路径）。



## TreeMap

​		**TreeMap底层是红黑树的数据结构，元素中的键重复会覆盖；元素会按照大小顺序排序。**

### 类的层级关系

